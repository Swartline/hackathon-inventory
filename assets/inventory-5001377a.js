import"./style-970dcbb6.js";import{g,E as p,I as v,a as M,r as w,b}from"./index-3ab0f3d8.js";(async()=>{var m,E;await WA.onInit();const s=document.getElementById("inventory"),d=await g(),r=e=>e===void 0?'<div class="card"></div>':`<div class="card-filled">
              <img src="${e==null?void 0:e.sprite_url}" alt="${e==null?void 0:e.description}" title="${e.name}" style="width:95%">
            </div>`,i=(e,t=[])=>{if(!e)throw new Error("Missing interface");const l=30,u=Math.max(Math.ceil(t.length/10)*10,l);let o="";for(let n=0;n<u;n++)t[n]!==void 0?o+=r(t[n]):o+=r();e.innerHTML=o;const I=document.getElementsByClassName("card-filled");for(let n=0;n<I.length;n++)I[n].addEventListener("click",()=>{t[n]!==void 0&&y(t[n])})};i(s,d);const c=document.getElementsByClassName("card-filled");for(let e=0;e<c.length;e++)c[e].addEventListener("click",()=>{d[e]!==void 0&&y(d[e])});const a=document.getElementById("itemModal");function y(e){if(a){a.style.display="block",document.getElementById("itemModalTitle").innerHTML=e.name,document.getElementById("itemModalDescription").innerHTML=e.description;const t=document.getElementById("tradeItem");if(!t)throw new Error("Trade button not found");t.setAttribute("data-item",String(e.id)),WA.player.state[p]?t.style.display="block":t.style.display="none"}}function f(){(a==null?void 0:a.style.display)==="block"&&(a.style.display="none")}(m=document.getElementById("closeInteractModal"))==null||m.addEventListener("click",f),window.onkeydown=function(e){e.key==="Escape"&&a&&(a.style.display="none")},WA.player.state.onVariableChange(v).subscribe(e=>{i(s,e)}),(E=document.getElementById("tradeItem"))==null||E.addEventListener("click",async e=>{const t=e.target.dataset.item,l=await M(t);l&&(await w(l),i(s,await g()),f(),await b(l),WA.player.state.saveVariable("trade_confirmed",!1,{public:!0,persist:!1}))})})();
